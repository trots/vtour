(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.VTOUR=f()}})(function(){var define,module,exports;return function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){class Button{constructor(parentElement){this._element=document.createElement("div");this._element.className="vt-button";parentElement.appendChild(this._element)}show(){this._element.style.visibility="visible"}hide(){this._element.style.visibility="hidden"}setToolTip(text){this._element.title=text}addClassName(name){this._element.className+=" "+name}addClickEventListener(callback){this._element.addEventListener("click",callback);this._element.addEventListener("touchend",callback)}}module.exports=Button},{}],2:[function(require,module,exports){const Scene=require("./Scene.js");class CylindricalScene extends Scene{constructor(parentElement){super(parentElement);this._controls.maxPolarAngle=Math.PI/2;this._controls.minPolarAngle=Math.PI/2;this._controls.rotateSpeed=-.3}zoom(delta){if(!super.zoom(delta)){return false}const viewAngleDiff=(this._camera.fov-this._camera.getEffectiveFOV())*(Math.PI/180);this._controls.maxPolarAngle=Math.PI/2+viewAngleDiff/2;this._controls.minPolarAngle=Math.PI/2-viewAngleDiff/2;return true}rotateX(angle){if(!this._controls.enabled){return false}const currentAngle=this._controls.getPolarAngle();let newAngle=currentAngle+angle;newAngle=Math.max(this._controls.minPolarAngle,Math.min(this._controls.maxPolarAngle,newAngle));const diff=newAngle-currentAngle;if(diff==0){return false}const rotationVec=this._getCameraXAxis();let quaternion=new THREE.Quaternion;quaternion.setFromAxisAngle(rotationVec,diff);this._camera.position.applyQuaternion(quaternion);this._camera.up.applyQuaternion(quaternion);return true}_onTextureLoaded(texture){this._sceneRadius=texture.image.width/(2*Math.PI);const cylinderHeight=texture.image.height;const cameraOffset=10;const cameraDistanceToScene=this._sceneRadius+cameraOffset;this._camera.fov=Math.atan(cylinderHeight/2/cameraDistanceToScene)*180/Math.PI*2;this._camera.near=1;this._camera.far=this._sceneRadius+this._sceneRadius*.2;this._camera.updateProjectionMatrix();this._camera.position.set(0,0,cameraOffset);this._camera.lookAt(0,0,0);const geometry=new THREE.CylinderGeometry(this._sceneRadius,this._sceneRadius,cylinderHeight,40);const material=new THREE.MeshBasicMaterial({map:texture,side:THREE.BackSide});const cylinder=new THREE.Mesh(geometry,material);this._scene.add(cylinder);this._createSceneObjects();this.render();super._onTextureLoaded()}_clear(){super._clear();this._controls.maxPolarAngle=Math.PI/2;this._controls.minPolarAngle=Math.PI/2}}module.exports=CylindricalScene},{"./Scene.js":7}],3:[function(require,module,exports){const Defines=Object.freeze({VersionMajor:1,VersionMinor:0,VersionPatch:0});module.exports=Defines},{}],4:[function(require,module,exports){const Button=require("./Button.js");const I18n=require("./I18n.js");class FullscreenButton extends Button{constructor(parentElement){super(parentElement);this.setToolTip(I18n.Dict.FullscreenTooltip);this.addClassName("vt-fullscreen-button");this.addClickEventListener(event=>{this._onClicked(event)})}_onClicked(event){if(document.fullscreenElement){document.exitFullscreen()}else{document.documentElement.requestFullscreen()}event.stopPropagation();event.preventDefault()}}module.exports=FullscreenButton},{"./Button.js":1,"./I18n.js":5}],5:[function(require,module,exports){var Dict={Loading:"Loading...",Close:"Close",SceneTooltip:"Scene name",FullscreenTooltip:"Switch fullscreen",VersionLabelTooltip:"Powered by vtour",PortalTooltip:"Go",PhotospotTooltip:"Look closer",ExitTooltip:"Exit",ExitQuestion:"Are you sure you want to close the tour?",LoadPanoramaError:"Unable to load a panorama image"};var SetLang=function(lang){switch(lang){case"ru":Dict.Loading="Загрузка...";Dict.Close="Закрыть";Dict.SceneTooltip="Название сцены";Dict.FullscreenTooltip="Переключить режим полного экрана";Dict.VersionLabelTooltip="Создано с использоанием vtour";Dict.PortalTooltip="Перейти";Dict.PhotospotTooltip="Рассмотреть";Dict.ExitTooltip="Выйти";Dict.ExitQuestion="Вы действительно хотите закончить виртуальный тур?";Dict.LoadPanoramaError="Ошибка загрузки панорамы";break;default:break}};module.exports={Dict:Dict,SetLang:SetLang}},{}],6:[function(require,module,exports){const I18n=require("./I18n.js");const TopMessageWidget=require("./TopMessageWidget.js");class PhotoWidget{constructor(parentElement){this._element=document.createElement("div");this._element.className="vt-photo-container";parentElement.appendChild(this._element);this._imageElement=document.createElement("img");this._imageElement.className="vt-photo-widget";this._element.appendChild(this._imageElement);this._imageElement.addEventListener("load",()=>{this._waiterWidget.hide()});this._imageElement.addEventListener("error",()=>{this._waiterWidget.hide()});this._waiterWidget=new TopMessageWidget(I18n.Dict.Loading,parentElement);this._waiterWidget.hide();this._closeElement=document.createElement("div");this._closeElement.title=I18n.Dict.Close;this._closeElement.className="vt-photo-close-item";this._closeElement.innerHTML="X";this._element.appendChild(this._closeElement)}setPhoto(photoPath){this._imageElement.src=photoPath;if(photoPath){this._waiterWidget.show()}}isVisible(){return this._element.style.visibility=="visible"}show(){this._element.style.visibility="visible"}hide(){this._element.style.visibility="hidden"}}module.exports=PhotoWidget},{"./I18n.js":5,"./TopMessageWidget.js":10}],7:[function(require,module,exports){const Defines=require("./Defines.js");const I18n=require("./I18n.js");const SceneObjectStateEnum=require("./SceneObjectStateEnum.js");const SceneObjectEnum=require("./SceneObjectEnum.js");const TopMessageWidget=require("./TopMessageWidget.js");const PhotoWidget=require("./PhotoWidget.js");const Button=require("./Button.js");const FullscreenButton=require("./FullscreenButton.js");let TourData=require("./TourData.js");class Scene{constructor(parentElement){this._parentElement=parentElement;this._sceneRadius=0;this._uid="";this._textureLoader=new THREE.TextureLoader;this._scene=new THREE.Scene;this._camera=new THREE.PerspectiveCamera;this._camera_init_position=this._camera.position.clone();this._camera_init_up=this._camera.up.clone();this._camera_init_zoom=this._camera.zoom;this._renderer=new THREE.WebGLRenderer;this._parentElement.appendChild(this._renderer.domElement);this._controls=new THREE.OrbitControls(this._camera,this._parentElement);this._controls.enableZoom=false;this._controls.enablePan=false;this._controls.enableKeys=false;this._raycaster=new THREE.Raycaster;this._exitButton=NaN;if(TourData.getExitUrl()){this._exitButton=new Button(this._parentElement);this._exitButton.setToolTip(I18n.Dict.ExitTooltip);this._exitButton.addClassName("vt-exit-button");this._exitButton.addClickEventListener(()=>{this.dispatchEvent({type:"exit"})})}this._photoWidget=new PhotoWidget(this._parentElement);this._nameLabel=document.createElement("div");this._nameLabel.title=I18n.Dict.SceneTooltip;this._nameLabel.className="vt-scene-name-label";this._parentElement.appendChild(this._nameLabel);this._versionLabel=document.createElement("div");this._versionLabel.title=I18n.Dict.VersionLabelTooltip;this._versionLabel.className="vt-version-label";this._versionLabel.innerHTML="vtour "+Defines.VersionMajor+"."+Defines.VersionMinor+"."+Defines.VersionPatch;this._parentElement.appendChild(this._versionLabel);this._fullscreenButton=new FullscreenButton(this._parentElement);this._messageWidget=new TopMessageWidget(I18n.Dict.Loading,this._parentElement);this._setMessageVisibility(false);this._sceneObjects=new Array;this._hoveredSceneObject=NaN;this.setPhotoVisibility(false,-1);Object.assign(Scene.prototype,THREE.EventDispatcher.prototype)}init(uid){this._clear();this._uid=uid;const image=TourData.getSceneImage(uid);if(!image){throw new Error("No scene image by uid="+uid)}this._textureLoader.load(image,texture=>{this._onTextureLoaded(texture)},undefined,err=>{this._onTextureLoadError(err)});this._nameLabel.innerHTML=TourData.getSceneTitle(uid);this._setMessageVisibility(true,I18n.Dict.Loading)}resize(width,height){this._renderer.setSize(width,height);this._camera.aspect=width/height;this._camera.updateProjectionMatrix()}render(){requestAnimationFrame(()=>{this.render()});this._controls.update();this._renderer.render(this._scene,this._camera)}hover(x,y){if(!this._controls.enabled){return}this._hoverObject(x,y)}click(x,y){if(this._controls.enabled){this._hoverObject(x,y)}if(!this._hoveredSceneObject){if(this._photoWidget.isVisible()){this.setPhotoVisibility(false,-1)}return}switch(this._hoveredSceneObject.userData.type){case SceneObjectEnum.Portal:const uid=TourData.getSceneTransitionUid(this._uid,this._hoveredSceneObject.userData.transitionIndex);this.dispatchEvent({type:"portalclicked",uid:uid});break;case SceneObjectEnum.Photo:const photoPath=TourData.getScenePhotoPath(this._uid,this._hoveredSceneObject.userData.photoIndex);this._photoWidget.setPhoto(photoPath);this.setPhotoVisibility(true,this._hoveredSceneObject.userData.photoIndex);this._setSceneObjectState(this._hoveredSceneObject,SceneObjectStateEnum.Normal);break;default:break}}zoom(delta){if(!this._controls.enabled){return false}this._camera.zoom+=delta*TourData.getZoomSpeed();if(this._camera.zoom<TourData.getZoomRangeMin()){this._camera.zoom=TourData.getZoomRangeMin()}else if(this._camera.zoom>TourData.getZoomRangeMax()){this._camera.zoom=TourData.getZoomRangeMax()}this._camera.updateProjectionMatrix();return true}rotateX(angle){if(!this._controls.enabled){return false}const xAxis=new THREE.Vector3(1,0,0);let quaternion=new THREE.Quaternion;quaternion.setFromAxisAngle(xAxis,angle);this._camera.position.applyQuaternion(quaternion);this._camera.up.applyQuaternion(quaternion);return true}rotateY(angle){if(!this._controls.enabled){return false}const yAxis=new THREE.Vector3(0,1,0);let quaternion=new THREE.Quaternion;quaternion.setFromAxisAngle(yAxis,angle);this._camera.position.applyQuaternion(quaternion);this._camera.up.applyQuaternion(quaternion);return true}rotateZ(angle){if(!this._controls.enabled){return false}const zAxis=new THREE.Vector3(0,0,1);let quaternion=new THREE.Quaternion;this._camera.up.applyQuaternion(quaternion.setFromAxisAngle(zAxis,angle));return true}isPhotoVisible(){return this._photoWidget.isVisible()}setPhotoVisibility(visible,photoIndex){if(visible){this._photoWidget.show();this._nameLabel.innerHTML=TourData.getScenePhotoTitle(this._uid,photoIndex);this._versionLabel.style.visibility="hidden";this._fullscreenButton.hide();this._controls.enabled=false;if(this._exitButton){this._exitButton.hide()}}else{this._photoWidget.hide();this._photoWidget.setPhoto("");this._nameLabel.innerHTML=TourData.getSceneTitle(this._uid);this._versionLabel.style.visibility="visible";this._fullscreenButton.show();this._controls.enabled=true;if(this._exitButton){this._exitButton.show()}}}_hoverObject(x,y){const sceneSize=new THREE.Vector2(0,0);this._renderer.getSize(sceneSize);let cursor=new THREE.Vector2;cursor.x=x/sceneSize.width*2-1;cursor.y=-(y/sceneSize.height)*2+1;this._raycaster.setFromCamera(cursor,this._camera);const intersectedObjects=this._raycaster.intersectObjects(this._sceneObjects);if(intersectedObjects.length>0){this._setSceneObjectState(intersectedObjects[0].object,SceneObjectStateEnum.Hovered)}else if(this._hoveredSceneObject){this._setSceneObjectState(this._hoveredSceneObject,SceneObjectStateEnum.Normal)}}_onTextureLoaded(_texture){this._setMessageVisibility(false)}_onTextureLoadError(err){console.log(err);this._setMessageVisibility(true,I18n.Dict.LoadPanoramaError)}_createSceneObjects(){this._sceneObjects=[];for(let i=0;i<TourData.getSceneTransitionsCount(this._uid);i++){let mesh=this._createSceneObjectMesh(TourData.getSceneTransitionHeight(this._uid,i),TourData.getSceneTransitionRadius(this._uid,i));mesh.userData={type:SceneObjectEnum.Portal,transitionIndex:i,tooltip:I18n.Dict.PortalTooltip};if(TourData.isInformativeDestinationTooltipsEnabled()){const destSceneUid=TourData.getSceneTransitionUid(this._uid,i);mesh.userData.tooltip=TourData.getSceneTitle(destSceneUid)}this._textureLoader.load(this._getAssetFilePath("portal.png"),texture=>{mesh.material.map=texture;mesh.material.color=NaN;mesh.material.needsUpdate=true});this._setSceneObjectState(mesh,SceneObjectStateEnum.Normal);this._addSceneObject(mesh,TourData.getSceneTransitionAngle(this._uid,i))}for(let i=0;i<TourData.getScenePhotosCount(this._uid);i++){let mesh=this._createSceneObjectMesh(TourData.getScenePhotoHeight(this._uid,i),TourData.getScenePhotoRadius(this._uid,i));mesh.userData={type:SceneObjectEnum.Photo,photoIndex:i,tooltip:I18n.Dict.PhotospotTooltip};if(TourData.isInformativeDestinationTooltipsEnabled()){mesh.userData.tooltip=TourData.getScenePhotoTitle(this._uid,i)}this._textureLoader.load(this._getAssetFilePath("photospot.png"),texture=>{mesh.material.map=texture;mesh.material.color=NaN;mesh.material.needsUpdate=true});this._setSceneObjectState(mesh,SceneObjectStateEnum.Normal);this._addSceneObject(mesh,TourData.getScenePhotoAngle(this._uid,i))}}_createSceneObjectMesh(spotHeight,spotRadius){const geometry=new THREE.PlaneGeometry(32,32);const material=new THREE.MeshBasicMaterial({color:NaN,transparent:true,side:THREE.DoubleSide});let mesh=new THREE.Mesh(geometry,material);mesh.position.set(0,spotHeight,-this._sceneRadius*spotRadius);return mesh}_addSceneObject(mesh,angle){let pivot=new THREE.Group;this._scene.add(pivot);pivot.add(mesh);pivot.rotateOnAxis(new THREE.Vector3(0,1,0),angle);this._sceneObjects.push(mesh)}_setSceneObjectState(mesh,state){this._parentElement.style.cursor=state==SceneObjectStateEnum.Hovered?"pointer":"auto";this._parentElement.title=state==SceneObjectStateEnum.Hovered?mesh.userData.tooltip:"";this._hoveredSceneObject=state==SceneObjectStateEnum.Hovered?mesh:NaN}_setMessageVisibility(visible,text=""){this._messageWidget.setText(text);if(visible){this._messageWidget.show();this._nameLabel.style.visibility="hidden";this._versionLabel.style.visibility="hidden";this._fullscreenButton.hide();if(this._exitButton){this._exitButton.hide()}}else{this._messageWidget.hide();this._nameLabel.style.visibility="visible";this._versionLabel.style.visibility="visible";this._fullscreenButton.show();if(this._exitButton){this._exitButton.show()}}}_clear(){while(this._scene.children.length>0){this._scene.remove(this._scene.children[0])}this._camera.position.copy(this._camera_init_position);this._camera.up.copy(this._camera_init_up);this._camera.zoom=this._camera_init_zoom;this._camera.updateProjectionMatrix();this._cylinder=NaN;this._uid="";this._sceneRadius=0}_getAssetFilePath(fileName){const assetsPath=TourData.getAssetsPath();return assetsPath?assetsPath+"/"+fileName:fileName}_getCameraXAxis(){let cameraVec=new THREE.Vector3(0,0,-1);cameraVec.applyQuaternion(this._camera.quaternion);const yAxis=new THREE.Vector3(0,1,0);cameraVec.applyAxisAngle(yAxis,-Math.PI/2);cameraVec.normalize();return cameraVec}}module.exports=Scene},{"./Button.js":1,"./Defines.js":3,"./FullscreenButton.js":4,"./I18n.js":5,"./PhotoWidget.js":6,"./SceneObjectEnum.js":8,"./SceneObjectStateEnum.js":9,"./TopMessageWidget.js":10,"./TourData.js":12}],8:[function(require,module,exports){const SceneObjectEnum=Object.freeze({Portal:0,Photo:1});module.exports=SceneObjectEnum},{}],9:[function(require,module,exports){const SceneObjectStateEnum=Object.freeze({Normal:0,Hovered:1});module.exports=SceneObjectStateEnum},{}],10:[function(require,module,exports){class TopMessageWidget{constructor(text,parentElement){this._element=document.createElement("div");this._element.className="vt-top-message-widget";this._element.innerHTML=text;parentElement.appendChild(this._element)}setText(text){this._element.innerHTML=text}show(){this._element.style.visibility="visible"}hide(){this._element.style.visibility="hidden"}}module.exports=TopMessageWidget},{}],11:[function(require,module,exports){const I18n=require("./I18n.js");const CylindricalScene=require("./CylindricalScene.js");let TourData=require("./TourData.js");const Scene=require("./Scene.js");class Tour{constructor(parentElement){this._parentElement=parentElement;this._touchDistance=0;window.addEventListener("resize",event=>{this._onResize(event)});this._parentElement.addEventListener("mousemove",event=>{this._onMouseMove(event)});this._parentElement.addEventListener("click",event=>{this._onClick(event)});this._parentElement.addEventListener("wheel",event=>{this._onMouseWheel(event)});this._parentElement.addEventListener("touchstart",event=>{this._onTouchStart(event)});this._parentElement.addEventListener("touchmove",event=>{this._onTouchMove(event)});this._parentElement.addEventListener("touchend",event=>{this._onTouchEnd(event)});this._parentElement.addEventListener("keydown",event=>{this._onKeyDown(event)});this._scene=new CylindricalScene(this._parentElement);this._scene.addEventListener("portalclicked",event=>{this._onTransitionActivated(event)});this._scene.addEventListener("exit",event=>{this._onExitClicked(event)});this._scene.resize(this._parentElement.offsetWidth,this._parentElement.offsetHeight)}start(){this._scene.init(TourData.getEntrySceneUid())}_onResize(_event){this._scene.resize(this._parentElement.offsetWidth,this._parentElement.offsetHeight)}_onMouseMove(event){this._scene.hover(event.clientX,event.clientY)}_onClick(event){this._scene.click(event.clientX,event.clientY);event.stopPropagation()}_onMouseWheel(event){event.preventDefault();const zoomStep=3;this._scene.zoom(event.deltaY<0?zoomStep:-zoomStep)}_onTouchStart(event){if(event.touches.length==2){this._touchDistance=this._getTouchDistance(event)}}_onTouchMove(event){const ZoomStep=2;const TouchDeltaSensitivity=2;if(event.touches.length==2){event.preventDefault();event.stopPropagation();const touchDistance=this._getTouchDistance(event);const delta=touchDistance-this._touchDistance;if(Math.abs(delta)<TouchDeltaSensitivity){return}this._scene.zoom(delta>0?ZoomStep:-ZoomStep);this._touchDistance=touchDistance}}_onTouchEnd(event){if(event.touches.length==2){this._touchDistance=0}else{this._scene.click(event.changedTouches[0].clientX,event.changedTouches[0].clientY);event.preventDefault()}}_onKeyDown(event){const RotateStep=.05;const ZoomStep=2;if(!TourData.isKeyboardEnabled()){return}switch(event.keyCode){case 27:if(this._scene.isPhotoVisible()){this._scene.setPhotoVisibility(false)}break;case 37:this._scene.rotateY(RotateStep);break;case 39:this._scene.rotateY(-RotateStep);break;case 38:break;case 40:break;case 107:this._scene.zoom(ZoomStep);break;case 109:this._scene.zoom(-ZoomStep);break;case 61:case 187:if(event.shiftKey){this._scene.zoom(ZoomStep)}break;case 173:if(!event.shiftKey){this._scene.zoom(-ZoomStep)}break;default:break}}_onTransitionActivated(event){this._scene.init(event.uid)}_onExitClicked(_event){if(confirm(I18n.Dict.ExitQuestion)){window.location=TourData.getExitUrl()}}_getTouchDistance(event){return Math.hypot(event.touches[0].clientX-event.touches[1].clientX,event.touches[0].clientY-event.touches[1].clientY)}}module.exports=Tour},{"./CylindricalScene.js":2,"./I18n.js":5,"./Scene.js":7,"./TourData.js":12}],12:[function(require,module,exports){class _TourData{constructor(){this._data={}}init(data){this._data=data}getPanoramaType(){return this._getValue(this._data,"type","cylindrical")}getAssetsPath(){return this._getValue(this._data,"assetsPath","")}getLang(){return this._getValue(this._data,"lang","en")}getZoomRangeMin(){return this._getValue(this._data,"zoomMin",1)}getZoomRangeMax(){return this._getValue(this._data,"zoomMax",3)}getZoomSpeed(){return this._getValue(this._data,"zoomSpeed",.02)}isKeyboardEnabled(){return this._getValue(this._data,"enableKeyboard",true)}isInformativeDestinationTooltipsEnabled(){return this._getValue(this._data,"enableInformativeDestinationTooltips",true)}getExitUrl(){return this._getValue(this._data,"exitUrl",NaN)}getEntrySceneUid(){return this._getValue(this._data,"entrySceneUid","")}getScenesCount(){return this._getValue(this._data,"scenes",[]).length}getSceneImage(uid){const scene=this._getSceneObject(uid);return this._getValue(scene,"image","")}getSceneTitle(uid){const scene=this._getSceneObject(uid);return this._getValue(scene,"title","")}getSceneTransitionsCount(uid){const scene=this._getSceneObject(uid);return this._getValue(scene,"transitions",[]).length}getSceneTransitionHeight(uid,index){const scene=this._getSceneObject(uid);const transition=this._getValue(scene,"transitions",[])[index];const point=this._getValue(transition,"point",{});return this._getValue(point,"height",0)}getSceneTransitionRadius(uid,index){const scene=this._getSceneObject(uid);const transition=this._getValue(scene,"transitions",[])[index];const point=this._getValue(transition,"point",{});return this._getValue(point,"radius",0)}getSceneTransitionAngle(uid,index){const scene=this._getSceneObject(uid);const transition=this._getValue(scene,"transitions",[])[index];const point=this._getValue(transition,"point",{});return this._getValue(point,"angle",0)}getSceneTransitionUid(uid,index){const scene=this._getSceneObject(uid);const transition=this._getValue(scene,"transitions",[])[index];return this._getValue(transition,"toUid",0)}getScenePhotosCount(uid){const scene=this._getSceneObject(uid);return this._getValue(scene,"photos",[]).length}getScenePhotoHeight(uid,index){const scene=this._getSceneObject(uid);const photo=this._getValue(scene,"photos",[])[index];const point=this._getValue(photo,"point",{});return this._getValue(point,"height",0)}getScenePhotoRadius(uid,index){const scene=this._getSceneObject(uid);const photo=this._getValue(scene,"photos",[])[index];const point=this._getValue(photo,"point",{});return this._getValue(point,"radius",0)}getScenePhotoAngle(uid,index){const scene=this._getSceneObject(uid);const photo=this._getValue(scene,"photos",[])[index];const point=this._getValue(photo,"point",{});return this._getValue(point,"angle",0)}getScenePhotoPath(uid,index){const scene=this._getSceneObject(uid);const photo=this._getValue(scene,"photos",[])[index];return this._getValue(photo,"image",0)}getScenePhotoTitle(uid,index){const scene=this._getSceneObject(uid);const photo=this._getValue(scene,"photos",[])[index];return this._getValue(photo,"title","")}_getSceneObject(uid){const scenes=this._getValue(this._data,"scenes",[]);for(const scene of scenes){const sceneUid=this._getValue(scene,"uid","");if(sceneUid==uid){return scene}}return NaN}_getValue(data,key,defaultValue){if(data&&key in data){return data[key]}return defaultValue}}var TourData=new _TourData;module.exports=TourData},{}],13:[function(require,module,exports){const I18n=require("./I18n.js");const Tour=require("./Tour.js");let TourData=require("./TourData.js");class VTOUR{static start(parentElement,tourData){TourData.init(tourData);I18n.SetLang(TourData.getLang());let tour=new Tour(parentElement);tour.start();return tour}}module.exports=VTOUR},{"./I18n.js":5,"./Tour.js":11,"./TourData.js":12}]},{},[13])(13)});